<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Neon Casino - Chicken Run</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --neon-pink: #ff00ff;
      --neon-blue: #00ffff;
      --neon-purple: #bf00ff;
      --neon-green: #39ff14;
      --dark-bg: #0a0a16;
      --darker-bg: #050510;
      --card-bg: rgba(20, 20, 40, 0.8);
      --gold: #ffd700;
      --gold-dark: #b8860b;
      --red: #c41e3a;
      --red-dark: #8b0000;
      --green: #2e8b57;
      --green-dark: #1e5631;
      --chicken: #ffcc00;
      --road: #333333;
      --grass: #2e8b57;
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }
    
    body { 
      margin: 0; 
      font-family: 'Exo 2', sans-serif; 
      color: white; 
      background: var(--darker-bg);
      overflow-x: hidden;
      min-height: 100vh;
    }
    
    /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }
    
    .bg-grid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(10, 10, 30, 0.2) 1px, transparent 1px),
        linear-gradient(90deg, rgba(10, 10, 30, 0.2) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: gridMove 20s linear infinite;
    }
    
    @keyframes gridMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(50px, 50px); }
    }
    
    .floating-shapes {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    
    .shape {
      position: absolute;
      border-radius: 50%;
      filter: blur(40px);
      opacity: 0.15;
      animation: float 15s infinite ease-in-out;
    }
    
    .shape-1 {
      width: 300px;
      height: 300px;
      background: var(--neon-pink);
      top: 10%;
      left: 5%;
      animation-delay: 0s;
    }
    
    .shape-2 {
      width: 400px;
      height: 400px;
      background: var(--neon-blue);
      top: 60%;
      left: 80%;
      animation-delay: -5s;
    }
    
    .shape-3 {
      width: 250px;
      height: 250px;
      background: var(--neon-purple);
      top: 20%;
      left: 70%;
      animation-delay: -10s;
    }
    
    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(20px, 30px) scale(1.1); }
      50% { transform: translate(-15px, 20px) scale(0.9); }
      75% { transform: translate(10px, -15px) scale(1.05); }
    }

    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
    header { 
      padding: 2rem 2rem 1rem; 
      text-align: center; 
      background: rgba(10, 10, 30, 0.7);
      backdrop-filter: blur(10px);
      border-bottom: 2px solid var(--neon-pink);
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
      position: relative;
      z-index: 1;
    }
    
    header h1 { 
      margin: 0; 
      font-size: 3.5rem; 
      font-family: 'Orbitron', sans-serif;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 3px;
      background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue), var(--neon-purple));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
      animation: neonPulse 2s infinite alternate;
    }
    
    @keyframes neonPulse {
      0% { text-shadow: 0 0 10px rgba(255, 0, 255, 0.5), 0 0 20px rgba(255, 0, 255, 0.3); }
      100% { text-shadow: 0 0 15px rgba(255, 0, 255, 0.8), 0 0 30px rgba(255, 0, 255, 0.5), 0 0 40px rgba(255, 0, 255, 0.3); }
    }

    /* –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ */
    .auth-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .auth-btn {
      padding: 0.6rem 1.2rem;
      font-size: 0.9rem;
      background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Exo 2', sans-serif;
      font-weight: 600;
    }
    
    .auth-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 255, 255, 0.5);
    }
    
    .user-panel {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-top: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .user-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }
    
    .user-greeting {
      font-size: 1rem;
      color: var(--neon-green);
      text-shadow: 0 0 10px rgba(57, 255, 20, 0.5);
    }
    
    .user-balance {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--neon-blue);
      text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
    }
    
    .balance-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    .balance-btn {
      padding: 0.5rem 1rem;
      font-size: 0.8rem;
      background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
      color: white;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .balance-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 0, 255, 0.5);
    }
    
    .logout-btn {
      padding: 0.5rem 1rem;
      font-size: 0.8rem;
      background: linear-gradient(45deg, #ff3333, #ff6666);
      color: white;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .logout-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 51, 51, 0.5);
    }
    
    /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 2rem;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 0 30px rgba(255, 0, 255, 0.5);
      border: 1px solid var(--neon-pink);
      position: relative;
    }
    
    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .close-btn:hover {
      color: var(--neon-pink);
      transform: scale(1.2);
    }
    
    .modal h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      color: var(--neon-blue);
      font-family: 'Orbitron', sans-serif;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: #ccc;
    }
    
    .form-group input {
      width: 100%;
      padding: 0.8rem;
      border-radius: 5px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(0, 0, 0, 0.3);
      color: white;
      font-family: 'Exo 2', sans-serif;
    }
    
    .form-group input:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    }
    
    .submit-btn {
      width: 100%;
      padding: 0.9rem;
      background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple));
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-family: 'Orbitron', sans-serif;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
    }
    
    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(255, 0, 255, 0.5);
    }
    
    .form-footer {
      text-align: center;
      margin-top: 1rem;
      color: #ccc;
    }
    
    .form-footer a {
      color: var(--neon-blue);
      text-decoration: none;
      cursor: pointer;
    }
    
    .form-footer a:hover {
      text-decoration: underline;
    }
    
    .error-message {
      color: #ff4d4d;
      font-size: 0.9rem;
      margin-top: 0.5rem;
      text-align: center;
      display: none;
    }
    
    .success-message {
      color: var(--neon-green);
      font-size: 0.9rem;
      margin-top: 0.5rem;
      text-align: center;
      display: none;
    }

    /* –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å */
    .game-container {
      max-width: 1400px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    
    .main-content {
      display: flex;
      gap: 25px;
      flex-wrap: wrap;
      animation: fadeIn 1.5s ease-out;
    }
    
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    
    .game-area {
      flex: 2;
      min-width: 300px;
    }
    
    .betting-area {
      flex: 1;
      min-width: 300px;
    }
    
    .panel {
      background: rgba(10, 10, 26, 0.8);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 25px;
      border: 1px solid var(--neon-blue);
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .panel:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
    }
    
    .panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue), var(--neon-green), var(--neon-pink));
    }
    
    .panel-title {
      font-size: 1.8rem;
      color: var(--neon-blue);
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'Orbitron', sans-serif;
    }
    
    .panel-title i {
      color: var(--neon-blue);
    }
    
    /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
    .game-field {
      background: var(--grass);
      height: 500px;
      border-radius: 10px;
      position: relative;
      overflow: hidden;
      border: 3px solid var(--neon-blue);
      margin-bottom: 20px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
    }
    
    .road {
      position: absolute;
      width: 100%;
      height: 80px;
      background: var(--road);
      left: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .road::before, .road::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 5px;
      background: repeating-linear-gradient(90deg, yellow, yellow 20px, transparent 20px, transparent 40px);
      top: 50%;
      transform: translateY(-50%);
    }
    
    .road-1 {
      top: 20%;
    }
    
    .road-2 {
      top: 40%;
    }
    
    .road-3 {
      top: 60%;
    }
    
    .road-4 {
      top: 80%;
    }
    
    .car {
      position: absolute;
      width: 80px;
      height: 40px;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      z-index: 5;
      transition: transform 0.1s;
    }
    
    .car-left {
      left: -100px;
      animation: moveLeft linear infinite;
    }
    
    .car-right {
      right: -100px;
      animation: moveRight linear infinite;
    }
    
    @keyframes moveLeft {
      0% { transform: translateX(0); }
      100% { transform: translateX(calc(100vw + 200px)); }
    }
    
    @keyframes moveRight {
      0% { transform: translateX(0); }
      100% { transform: translateX(calc(-100vw - 200px)); }
    }
    
    .chicken {
      position: absolute;
      width: 40px;
      height: 40px;
      background: var(--chicken);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      z-index: 10;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      transition: all 0.2s;
      box-shadow: 0 0 10px rgba(255, 204, 0, 0.7);
    }
    
    .chicken::before {
      content: 'üêî';
    }
    
    .chicken.jumping {
      animation: chickenJump 0.5s ease-in-out;
    }
    
    .chicken.crash {
      animation: chickenCrash 0.5s ease-in-out;
    }
    
    @keyframes chickenJump {
      0% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(-20px); }
      100% { transform: translateX(-50%) translateY(0); }
    }
    
    @keyframes chickenCrash {
      0% { transform: translateX(-50%) scale(1) rotate(0deg); }
      50% { transform: translateX(-50%) scale(1.2) rotate(180deg); }
      100% { transform: translateX(-50%) scale(0.8) rotate(360deg); }
    }
    
    .finish-line {
      position: absolute;
      width: 100%;
      height: 20px;
      background: repeating-linear-gradient(90deg, var(--neon-blue), var(--neon-blue) 10px, transparent 10px, transparent 20px);
      top: 0;
      left: 0;
    }
    
    /* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á–µ—Ç–∞ */
    .score-display {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
    }
    
    .player-score {
      text-align: center;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      width: 45%;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s;
    }
    
    .player-score.active {
      border-color: var(--neon-blue);
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
    }
    
    .player-name {
      font-size: 1.5rem;
      margin-bottom: 10px;
      font-weight: 600;
    }
    
    .score {
      font-size: 3rem;
      font-weight: bold;
      color: var(--neon-blue);
      text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    }
    
    .current-game {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 10px;
    }
    
    .game-point {
      font-size: 1.3rem;
      background: rgba(255, 255, 255, 0.1);
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 600;
    }
    
    /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ */
    .balance-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s;
    }
    
    .balance-info:hover {
      transform: scale(1.02);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);
    }
    
    .balance-amount {
      font-size: 2rem;
      font-weight: bold;
      color: var(--neon-blue);
      text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
      transition: all 0.3s;
    }
    
    /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∞–º–∏ */
    .bet-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .bet-amount {
      flex: 1;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(0, 0, 0, 0.5);
      color: white;
      font-size: 1.1rem;
      text-align: center;
      transition: all 0.3s;
    }
    
    .bet-amount:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
    }
    
    .player-bet {
      flex: 1;
      padding: 15px;
      border-radius: 8px;
      border: none;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
    }
    
    .player-bet::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }
    
    .player-bet:hover::before {
      left: 100%;
    }
    
    .bet-success {
      background: linear-gradient(135deg, var(--neon-green), var(--green-dark));
      color: white;
    }
    
    .bet-fail {
      background: linear-gradient(135deg, var(--red), var(--red-dark));
      color: white;
    }
    
    .player-bet:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .player-bet:active {
      transform: translateY(1px);
    }
    
    .player-bet:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .player-bet:disabled:hover::before {
      left: -100%;
    }
    
    /* –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞–≤–æ–∫ */
    .bets-table-container {
      max-height: 400px;
      overflow-y: auto;
      margin-top: 10px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .bets-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .bets-table th {
      background: rgba(255, 215, 0, 0.2);
      padding: 15px;
      text-align: left;
      position: sticky;
      top: 0;
      color: var(--neon-blue);
      font-weight: 600;
    }
    
    .bets-table td {
      padding: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: background-color 0.3s;
    }
    
    .bets-table tr:hover td {
      background-color: rgba(255, 255, 255, 0.05);
    }
    
    .win {
      color: var(--neon-green);
      font-weight: bold;
    }
    
    .loss {
      color: var(--red);
      font-weight: bold;
    }
    
    /* –õ–æ–≥ –∏–≥—Ä—ã */
    .game-log {
      max-height: 200px;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .log-entry {
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
      transition: background-color 0.3s;
    }
    
    .log-entry:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }
    
    .log-entry i {
      color: var(--neon-blue);
    }
    
    /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
    .controls {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    .btn {
      padding: 15px 25px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));
      color: white;
      flex: 2;
    }
    
    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      flex: 1;
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .btn:active {
      transform: translateY(1px);
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn:disabled:hover::before {
      left: -100%;
    }
    
    /* –¢–∞–π–º–µ—Ä –∏–≥—Ä—ã */
    .game-timer {
      text-align: center;
      font-size: 1.5rem;
      margin: 10px 0;
      color: var(--neon-blue);
      font-weight: 600;
      animation: pulse 1.5s infinite;
    }
    
    /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
    .pulse {
      animation: pulse 0.5s;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    .chicken-move {
      animation: chickenMove 0.5s;
    }
    
    @keyframes chickenMove {
      0% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.1); }
      100% { transform: translateX(-50%) scale(1); }
    }
    
    /* –≠—Ñ—Ñ–µ–∫—Ç —Ç—Ä—è—Å–∫–∏ –ø—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–µ */
    .shake {
      animation: shake 0.5s;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }
    
    /* –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–∏–≥—Ä—ã—à–∞ */
    .win-animation {
      animation: winAnimation 1s;
    }
    
    @keyframes winAnimation {
      0% { transform: scale(1); }
      25% { transform: scale(1.2); }
      50% { transform: scale(1); }
      75% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: var(--neon-blue);
      opacity: 0;
      z-index: 1000;
      animation: confettiFall 5s linear forwards;
    }
    
    @keyframes confettiFall {
      0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    
    /* –ù–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏ –∞–Ω–∏–º–∞—Ü–∏—è */
    .new-bet {
      animation: highlight 2s;
    }
    
    @keyframes highlight {
      0% { background-color: rgba(255, 215, 0, 0.3); }
      100% { background-color: transparent; }
    }
    
    /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
    .controls-info {
      text-align: center;
      margin-top: 10px;
      color: #ccc;
      font-size: 0.9rem;
    }
    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
      .main-content {
        flex-direction: column;
      }
      
      .game-field {
        height: 400px;
      }
      
      header h1 {
        font-size: 2.2rem;
      }
      
      .panel-title {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
  <div class="bg-animation">
    <div class="bg-grid"></div>
    <div class="floating-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
    </div>
  </div>

  <header>
    <h1>Neon Casino - Chicken Run</h1>
    <p>–°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É –Ω–∞ —É—Å–ø–µ—Ö –∫—É—Ä–∏—Ü—ã-–ø–µ—Ä–µ–±–µ–∂—á–∏–∫–∞!</p>
    
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="auth-container">
      <div id="auth-buttons">
        <button class="auth-btn" id="login-btn">–í–æ–π—Ç–∏</button>
        <button class="auth-btn" id="register-btn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
      </div>
      <div id="user-panel" class="user-panel" style="display: none;">
        <div class="user-info">
          <span class="user-greeting" id="user-greeting">–ü—Ä–∏–≤–µ—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å!</span>
          <span class="user-balance">–ë–∞–ª–∞–Ω—Å: <span id="balance-amount">0</span> ‚ÇΩ</span>
        </div>
        <div class="balance-actions">
          <button class="balance-btn" id="deposit-btn">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
          <button class="balance-btn" id="withdraw-btn">–í—ã–≤–µ—Å—Ç–∏</button>
          <button class="logout-btn" id="logout-btn">–í—ã–π—Ç–∏</button>
        </div>
      </div>
    </div>
  </header>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞ -->
  <div id="login-modal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="close-login">&times;</button>
      <h2>–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
      <form id="login-form">
        <div class="form-group">
          <label for="login-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
          <input type="text" id="login-username" required>
        </div>
        <div class="form-group">
          <label for="login-password">–ü–∞—Ä–æ–ª—å</label>
          <input type="password" id="login-password" required>
        </div>
        <button type="submit" class="submit-btn">–í–æ–π—Ç–∏</button>
        <div class="error-message" id="login-error"></div>
        <div class="form-footer">
          –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a id="show-register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
  <div id="register-modal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="close-register">&times;</button>
      <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
      <form id="register-form">
        <div class="form-group">
          <label for="register-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
          <input type="text" id="register-username" required>
        </div>
        <div class="form-group">
          <label for="register-password">–ü–∞—Ä–æ–ª—å</label>
          <input type="password" id="register-password" required>
        </div>
        <div class="form-group">
          <label for="confirm-password">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
          <input type="password" id="confirm-password" required>
        </div>
        <button type="submit" class="submit-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        <div class="error-message" id="register-error"></div>
        <div class="success-message" id="register-success"></div>
        <div class="form-footer">
          –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a id="show-login">–í–æ–π—Ç–∏</a>
        </div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ -->
  <div id="deposit-modal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="close-deposit">&times;</button>
      <h2>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h2>
      <form id="deposit-form">
        <div class="form-group">
          <label for="deposit-amount">–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (‚ÇΩ)</label>
          <input type="number" id="deposit-amount" min="1" required>
        </div>
        <button type="submit" class="submit-btn">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
        <div class="success-message" id="deposit-success"></div>
      </form>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤ -->
  <div id="withdraw-modal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="close-withdraw">&times;</button>
      <h2>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h2>
      <form id="withdraw-form">
        <div class="form-group">
          <label for="withdraw-amount">–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞ (‚ÇΩ)</label>
          <input type="number" id="withdraw-amount" min="1" required>
        </div>
        <button type="submit" class="submit-btn">–í—ã–≤–µ—Å—Ç–∏</button>
        <div class="error-message" id="withdraw-error"></div>
        <div class="success-message" id="withdraw-success"></div>
      </form>
    </div>
  </div>

  <!-- –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
  <div class="game-container">
    <div class="main-content">
      <div class="game-area">
        <div class="panel">
          <h2 class="panel-title"><i class="fas fa-gamepad"></i> –ò–ì–†–û–í–û–ï –ü–û–õ–ï</h2>
          <div class="game-timer" id="game-timer">–ò–≥—Ä–∞ –Ω–∞—á–Ω–µ—Ç—Å—è —á–µ—Ä–µ–∑: 5 —Å–µ–∫</div>
          <div class="game-field" id="game-field">
            <div class="finish-line"></div>
            <div class="road road-1">
              <div class="car car-left" style="background: #ff4444; animation-duration: 4s;">üöó</div>
              <div class="car car-right" style="background: #4444ff; animation-duration: 5s; animation-delay: 1s;">üöô</div>
            </div>
            <div class="road road-2">
              <div class="car car-left" style="background: #44ff44; animation-duration: 6s; animation-delay: 0.5s;">üöï</div>
              <div class="car car-right" style="background: #ffff44; animation-duration: 7s; animation-delay: 2s;">üöê</div>
            </div>
            <div class="road road-3">
              <div class="car car-left" style="background: #ff44ff; animation-duration: 5s; animation-delay: 1.5s;">üöì</div>
              <div class="car car-right" style="background: #44ffff; animation-duration: 4s; animation-delay: 0.2s;">üöö</div>
            </div>
            <div class="road road-4">
              <div class="car car-left" style="background: #aa44aa; animation-duration: 6s; animation-delay: 0.7s;">üöõ</div>
              <div class="car car-right" style="background: #aaaa44; animation-duration: 5s; animation-delay: 2.5s;">üöí</div>
            </div>
            <div class="chicken" id="chicken"></div>
          </div>
          
          <div class="score-display">
            <div class="player-score">
              <div class="player-name">–£–°–ü–ï–®–ù–´–ï –ü–û–ü–´–¢–ö–ò</div>
              <div class="score" id="success-score">0</div>
            </div>
            <div class="player-score">
              <div class="player-name">–ù–ï–£–î–ê–ß–ù–´–ï –ü–û–ü–´–¢–ö–ò</div>
              <div class="score" id="fail-score">0</div>
            </div>
          </div>
          
          <div class="game-log" id="game-log">
            <div class="log-entry"><i class="fas fa-info-circle"></i> –ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è!</div>
          </div>
          <div class="controls-info">
            –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–º—É–ª—è—Ü–∏—è - –∫—É—Ä–∏—Ü–∞ —Å–∞–º–∞ –ø–µ—Ä–µ–±–µ–≥–∞–µ—Ç –¥–æ—Ä–æ–≥—É!
          </div>
        </div>
        
        <div class="controls">
          <button class="btn btn-primary" id="start-game" disabled>
            <i class="fas fa-play"></i> –°–î–ï–õ–ê–ô–¢–ï –°–¢–ê–í–ö–£ –î–õ–Ø –ù–ê–ß–ê–õ–ê
          </button>
          <button class="btn btn-secondary" id="reset-game">
            <i class="fas fa-redo"></i> –°–ë–†–û–°
          </button>
        </div>
      </div>
      
      <div class="betting-area">
        <div class="panel">
          <h2 class="panel-title"><i class="fas fa-coins"></i> –í–ê–®–ò –°–¢–ê–í–ö–ò</h2>
          <div class="balance-info">
            <div>–í–∞—à –±–∞–ª–∞–Ω—Å:</div>
            <div class="balance-amount" id="balance">0 ‚ÇΩ</div>
          </div>
          
          <div class="bet-controls">
            <input type="number" class="bet-amount" id="bet-amount" value="100" min="10" max="5000">
            <button class="player-bet bet-success" id="bet-success">
              <i class="fas fa-check"></i> –°–¢–ê–í–ö–ê –ù–ê –£–°–ü–ï–• (x2)
            </button>
            <button class="player-bet bet-fail" id="bet-fail">
              <i class="fas fa-times"></i> –°–¢–ê–í–ö–ê –ù–ê –ù–ï–£–î–ê–ß–£ (x2)
            </button>
          </div>
          
          <div class="panel">
            <h2 class="panel-title"><i class="fas fa-table"></i> –ñ–ò–í–´–ï –°–¢–ê–í–ö–ò</h2>
            <div class="bets-table-container">
              <table class="bets-table">
                <thead>
                  <tr>
                    <th>–ò–≥—Ä–æ–∫</th>
                    <th>–°—Ç–∞–≤–∫–∞</th>
                    <th>–ù–∞ —á—Ç–æ</th>
                    <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
                  </tr>
                </thead>
                <tbody id="bets-table-body">
                  <!-- –°—Ç–∞–≤–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    function initAuthSystem() {
      // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
      const loginBtn = document.getElementById('login-btn');
      const registerBtn = document.getElementById('register-btn');
      const logoutBtn = document.getElementById('logout-btn');
      const depositBtn = document.getElementById('deposit-btn');
      const withdrawBtn = document.getElementById('withdraw-btn');
      
      const loginModal = document.getElementById('login-modal');
      const registerModal = document.getElementById('register-modal');
      const depositModal = document.getElementById('deposit-modal');
      const withdrawModal = document.getElementById('withdraw-modal');
      
      const closeLogin = document.getElementById('close-login');
      const closeRegister = document.getElementById('close-register');
      const closeDeposit = document.getElementById('close-deposit');
      const closeWithdraw = document.getElementById('close-withdraw');
      
      const showRegister = document.getElementById('show-register');
      const showLogin = document.getElementById('show-login');
      
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');
      const depositForm = document.getElementById('deposit-form');
      const withdrawForm = document.getElementById('withdraw-form');
      
      const authButtons = document.getElementById('auth-buttons');
      const userPanel = document.getElementById('user-panel');
      const userGreeting = document.getElementById('user-greeting');
      const balanceAmount = document.getElementById('balance-amount');
      const gameBalance = document.getElementById('balance');
      
      const loginError = document.getElementById('login-error');
      const registerError = document.getElementById('register-error');
      const registerSuccess = document.getElementById('register-success');
      const depositSuccess = document.getElementById('deposit-success');
      const withdrawError = document.getElementById('withdraw-error');
      const withdrawSuccess = document.getElementById('withdraw-success');

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      checkAuthStatus();

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
      loginBtn.addEventListener('click', () => openModal(loginModal));
      registerBtn.addEventListener('click', () => openModal(registerModal));
      logoutBtn.addEventListener('click', logout);
      depositBtn.addEventListener('click', () => openModal(depositModal));
      withdrawBtn.addEventListener('click', () => openModal(withdrawModal));
      
      closeLogin.addEventListener('click', () => closeModal(loginModal));
      closeRegister.addEventListener('click', () => closeModal(registerModal));
      closeDeposit.addEventListener('click', () => closeModal(depositModal));
      closeWithdraw.addEventListener('click', () => closeModal(withdrawModal));
      
      showRegister.addEventListener('click', () => {
        closeModal(loginModal);
        openModal(registerModal);
      });
      
      showLogin.addEventListener('click', () => {
        closeModal(registerModal);
        openModal(loginModal);
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–æ—Ä–º
      loginForm.addEventListener('submit', handleLogin);
      registerForm.addEventListener('submit', handleRegister);
      depositForm.addEventListener('submit', handleDeposit);
      withdrawForm.addEventListener('submit', handleWithdraw);
      
      // –§—É–Ω–∫—Ü–∏–∏
      function openModal(modal) {
        modal.style.display = 'flex';
        clearMessages();
      }
      
      function closeModal(modal) {
        modal.style.display = 'none';
        clearMessages();
        // –û—á–∏—â–∞–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º
        if (modal === loginModal) {
          loginForm.reset();
        } else if (modal === registerModal) {
          registerForm.reset();
        } else if (modal === depositModal) {
          depositForm.reset();
        } else if (modal === withdrawModal) {
          withdrawForm.reset();
        }
      }
      
      function clearMessages() {
        loginError.style.display = 'none';
        registerError.style.display = 'none';
        registerSuccess.style.display = 'none';
        depositSuccess.style.display = 'none';
        withdrawError.style.display = 'none';
        withdrawSuccess.style.display = 'none';
      }
      
      function checkAuthStatus() {
        const currentUser = localStorage.getItem('currentUser');
        if (currentUser) {
          // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
          const user = JSON.parse(currentUser);
          authButtons.style.display = 'none';
          userPanel.style.display = 'flex';
          userGreeting.textContent = `–ü—Ä–∏–≤–µ—Ç, ${user.username}!`;
          balanceAmount.textContent = user.balance || 0;
          gameBalance.textContent = `${user.balance || 0} ‚ÇΩ`;
        } else {
          // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
          authButtons.style.display = 'flex';
          userPanel.style.display = 'none';
        }
      }
      
      function updateUserBalance(newBalance) {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser) {
          currentUser.balance = newBalance;
          localStorage.setItem('currentUser', JSON.stringify(currentUser));
          
          // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –≤ –º–∞—Å—Å–∏–≤–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
          const users = JSON.parse(localStorage.getItem('users') || '[]');
          const userIndex = users.findIndex(u => u.username === currentUser.username);
          if (userIndex !== -1) {
            users[userIndex].balance = newBalance;
            localStorage.setItem('users', JSON.stringify(users));
          }
          
          // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
          balanceAmount.textContent = newBalance;
          gameBalance.textContent = `${newBalance} ‚ÇΩ`;
        }
      }
      
      function handleLogin(e) {
        e.preventDefault();
        
        const username = document.getElementById('login-username').value;
        const password = document.getElementById('login-password').value;
        
        // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ localStorage
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        
        // –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º –∏ –ø–∞—Ä–æ–ª–µ–º
        const user = users.find(u => u.username === username && u.password === password);
        
        if (user) {
          // –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
          localStorage.setItem('currentUser', JSON.stringify(user));
          checkAuthStatus();
          closeModal(loginModal);
        } else {
          // –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞
          loginError.textContent = '–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å';
          loginError.style.display = 'block';
        }
      }
      
      function handleRegister(e) {
        e.preventDefault();
        
        const username = document.getElementById('register-username').value;
        const password = document.getElementById('register-password').value;
        const confirmPassword = document.getElementById('confirm-password').value;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–≤–ø–∞–¥–∞—é—Ç –ª–∏ –ø–∞—Ä–æ–ª–∏
        if (password !== confirmPassword) {
          registerError.textContent = '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç';
          registerError.style.display = 'block';
          return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const existingUser = users.find(u => u.username === username);
        
        if (existingUser) {
          registerError.textContent = '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç';
          registerError.style.display = 'block';
          return;
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–∞—á–∞–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º 1000
        const newUser = { 
          username, 
          password, 
          balance: 1000  // –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
        };
        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
        registerSuccess.textContent = '–ê–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏.';
        registerSuccess.style.display = 'block';
        
        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
        setTimeout(() => {
          registerForm.reset();
          closeModal(registerModal);
          openModal(loginModal);
        }, 2000);
      }
      
      function handleDeposit(e) {
        e.preventDefault();
        
        const amount = parseInt(document.getElementById('deposit-amount').value);
        
        if (isNaN(amount) || amount <= 0) {
          depositSuccess.textContent = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É';
          depositSuccess.style.color = '#ff4d4d';
          depositSuccess.style.display = 'block';
          return;
        }
        
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser) {
          const newBalance = (currentUser.balance || 0) + amount;
          updateUserBalance(newBalance);
          
          depositSuccess.textContent = `–ë–∞–ª–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${amount} ‚ÇΩ`;
          depositSuccess.style.color = '#39ff14';
          depositSuccess.style.display = 'block';
          
          setTimeout(() => {
            closeModal(depositModal);
          }, 1500);
        }
      }
      
      function handleWithdraw(e) {
        e.preventDefault();
        
        const amount = parseInt(document.getElementById('withdraw-amount').value);
        
        if (isNaN(amount) || amount <= 0) {
          withdrawError.textContent = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É';
          withdrawError.style.display = 'block';
          return;
        }
        
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser) {
          const currentBalance = currentUser.balance || 0;
          
          if (amount > currentBalance) {
            withdrawError.textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ';
            withdrawError.style.display = 'block';
            return;
          }
          
          const newBalance = currentBalance - amount;
          updateUserBalance(newBalance);
          
          withdrawSuccess.textContent = `–°—Ä–µ–¥—Å—Ç–≤–∞ –≤ —Ä–∞–∑–º–µ—Ä–µ ${amount} ‚ÇΩ —É—Å–ø–µ—à–Ω–æ –≤—ã–≤–µ–¥–µ–Ω—ã`;
          withdrawSuccess.style.display = 'block';
          
          setTimeout(() => {
            closeModal(withdrawModal);
          }, 1500);
        }
      }
      
      function logout() {
        localStorage.removeItem('currentUser');
        checkAuthStatus();
      }
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
      window.addEventListener('click', (e) => {
        if (e.target === loginModal) {
          closeModal(loginModal);
        }
        if (e.target === registerModal) {
          closeModal(registerModal);
        }
        if (e.target === depositModal) {
          closeModal(depositModal);
        }
        if (e.target === withdrawModal) {
          closeModal(withdrawModal);
        }
      });
    }

    // –ò–≥—Ä–∞ Chicken Run
    document.addEventListener('DOMContentLoaded', function() {
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
      initAuthSystem();
      
      // –≠–ª–µ–º–µ–Ω—Ç—ã DOM –∏–≥—Ä—ã
      const balanceElement = document.getElementById('balance');
      const betAmountInput = document.getElementById('bet-amount');
      const betSuccessButton = document.getElementById('bet-success');
      const betFailButton = document.getElementById('bet-fail');
      const startGameButton = document.getElementById('start-game');
      const resetGameButton = document.getElementById('reset-game');
      const successScoreElement = document.getElementById('success-score');
      const failScoreElement = document.getElementById('fail-score');
      const chickenElement = document.getElementById('chicken');
      const gameLogElement = document.getElementById('game-log');
      const betsTableBody = document.getElementById('bets-table-body');
      const gameTimerElement = document.getElementById('game-timer');
      const gameField = document.getElementById('game-field');
      
      // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
      let balance = 0;
      let currentBet = null;
      let gameInProgress = false;
      let successScore = 0;
      let failScore = 0;
      let gameInterval;
      let gameTimer;
      let gameTime = 5; // –ò–≥—Ä–∞ –¥–ª–∏—Ç—Å—è 5 —Å–µ–∫—É–Ω–¥
      let liveBetsInterval;
      let chickenPosition = { x: 50, y: 90 }; // –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
      let chickenDirection = 0; // -1: –≤–ª–µ–≤–æ, 0: —Å—Ç–æ–∏—Ç, 1: –≤–ø—Ä–∞–≤–æ
      let chickenSpeed = 1.2; // –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –∫—É—Ä–∏—Ü—ã
      let predeterminedOutcome = null; // 'win' –∏–ª–∏ 'lose'
      
      // –§–ª–∞–≥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫
      let betCooldown = false;
      
      // –°–ø–∏—Å–∫–∏ –∏–º–µ–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
      const firstNames = ["–ê–ª–µ–∫—Å–µ–π", "–ú–∞—Ä–∏—è", "–î–º–∏—Ç—Ä–∏–π", "–û–ª—å–≥–∞", "–°–µ—Ä–≥–µ–π", "–ê–Ω–Ω–∞", "–ò–≤–∞–Ω", "–ï–ª–µ–Ω–∞", "–ú–∏—Ö–∞–∏–ª", "–ù–∞—Ç–∞–ª—å—è", "–ê–Ω–¥—Ä–µ–π", "–Æ–ª–∏—è", "–ü–∞–≤–µ–ª", "–í–∏–∫—Ç–æ—Ä–∏—è", "–ê—Ä—Ç–µ–º", "–ö—Å–µ–Ω–∏—è"];
      const lastNames = ["–ò–≤–∞–Ω–æ–≤", "–ü–µ—Ç—Ä–æ–≤", "–°–∏–¥–æ—Ä–æ–≤", "–ö—É–∑–Ω–µ—Ü–æ–≤", "–°–º–∏—Ä–Ω–æ–≤", "–ü–æ–ø–æ–≤", "–í–∞—Å–∏–ª—å–µ–≤", "–§–µ–¥–æ—Ä–æ–≤", "–ú–æ—Ä–æ–∑–æ–≤", "–í–æ–ª–∫–æ–≤", "–ê–ª–µ–∫—Å–µ–µ–≤", "–õ–µ–±–µ–¥–µ–≤", "–°–µ–º–µ–Ω–æ–≤", "–ï–≥–æ—Ä–æ–≤", "–ü–∞–≤–ª–æ–≤", "–ö–æ–∑–ª–æ–≤"];
      
      // –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞–≤–æ–∫ (–∏–º–∏—Ç–∞—Ü–∏—è –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤)
      let sampleBets = [
        { player: "–ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤", amount: 500, on: "success", result: "win" },
        { player: "–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞", amount: 300, on: "fail", result: "loss" },
        { player: "–î–º–∏—Ç—Ä–∏–π –°–∏–¥–æ—Ä–æ–≤", amount: 750, on: "success", result: "win" },
        { player: "–û–ª—å–≥–∞ –ö—É–∑–Ω–µ—Ü–æ–≤–∞", amount: 200, on: "fail", result: "loss" },
        { player: "–°–µ—Ä–≥–µ–π –°–º–∏—Ä–Ω–æ–≤", amount: 450, on: "success", result: "win" }
      ];
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç–∞–≤–æ–∫
      function setBettingControlsDisabled(disabled) {
        betAmountInput.disabled = disabled;
        betSuccessButton.disabled = disabled;
        betFailButton.disabled = disabled;
      }
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∞–≤–æ–∫
      function initializeBetsTable() {
        betsTableBody.innerHTML = '';
        sampleBets.forEach(bet => {
          addBetToTable(bet);
        });
      }
      
      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É
      function addBetToTable(bet, isNew = false) {
        const row = document.createElement('tr');
        if (isNew) {
          row.classList.add('new-bet');
        }
        row.innerHTML = `
          <td>${bet.player}</td>
          <td>${bet.amount} ‚ÇΩ</td>
          <td>${bet.on === 'success' ? '–£—Å–ø–µ—Ö' : '–ù–µ—É–¥–∞—á–∞'}</td>
          <td class="${bet.result === 'win' ? 'win' : 'loss'}">
            ${bet.result === 'win' ? '<i class="fas fa-trophy"></i> –í—ã–∏–≥—Ä—ã—à' : 
              bet.result === 'loss' ? '<i class="fas fa-times"></i> –ü—Ä–æ–∏–≥—Ä—ã—à' : 
              '<i class="fas fa-clock"></i> –í –ø—Ä–æ—Ü–µ—Å—Å–µ'}
          </td>
        `;
        betsTableBody.appendChild(row);
        
        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤–æ–π —Å—Ç–∞–≤–∫–µ
        if (isNew) {
          row.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
      }
      
      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π —Å—Ç–∞–≤–∫–∏
      function generateRandomBet() {
        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
        const player = `${firstName} ${lastName}`;
        const amount = Math.floor(Math.random() * 500) + 50; // –û—Ç 50 –¥–æ 550
        const on = Math.random() < 0.5 ? "success" : "fail";
        const result = Math.random() < 0.5 ? "win" : "loss";
        
        return { player, amount, on, result };
      }
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
      function updateBalance() {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser) {
          balance = currentUser.balance || 0;
          balanceElement.textContent = `${balance} ‚ÇΩ`;
        }
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
        balanceElement.classList.add('pulse');
        setTimeout(() => balanceElement.classList.remove('pulse'), 500);
      }
      
      // –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏
      function placeBet(onType) {
        if (gameInProgress) {
          alert("–ò–≥—Ä–∞ —É–∂–µ –Ω–∞—á–∞–ª–∞—Å—å! –°—Ç–∞–≤–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è.");
          return;
        }
        
        // –ó–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫
        if (betCooldown) {
          return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç–∞–≤–∫–∏
        if (currentBet) {
          alert("–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç–∞–≤–∫–∞! –ù–∞—á–Ω–∏—Ç–µ –∏–≥—Ä—É –∏–ª–∏ —Å–±—Ä–æ—Å—å—Ç–µ —Å—Ç–∞–≤–∫—É.");
          return;
        }
        
        const amount = parseInt(betAmountInput.value);
        if (isNaN(amount) || amount < 10) {
          alert("–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ - 10 ‚ÇΩ");
          return;
        }
        
        if (amount > balance) {
          alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ!");
          return;
        }
        
        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∑–∞—â–∏—Ç—É –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫
        betCooldown = true;
        setTimeout(() => {
          betCooldown = false;
        }, 500);
        
        // –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser) {
          balance -= amount;
          updateUserBalance(balance);
          currentBet = { on: onType, amount: amount };
          
          // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç–∞–≤–æ–∫
          setBettingControlsDisabled(true);
          
          // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É
          const userBet = { player: "–í—ã", amount: amount, on: onType, result: "" };
          addBetToTable(userBet, true);
          
          addLogEntry(`–í—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∏ ${amount} ‚ÇΩ –Ω–∞ ${onType === 'success' ? '—É—Å–ø–µ—Ö (x2)' : '–Ω–µ—É–¥–∞—á—É (x2)'}`);
          
          // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
          startGameButton.disabled = false;
          startGameButton.innerHTML = '<i class="fas fa-play"></i> –ù–ê–ß–ê–¢–¨ –ò–ì–†–£';
          
          // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
          const button = onType === 'success' ? betSuccessButton : betFailButton;
          button.classList.add('pulse');
          setTimeout(() => button.classList.remove('pulse'), 500);
        }
      }
      
      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥ –∏–≥—Ä—ã
      function addLogEntry(message) {
        const logEntry = document.createElement('div');
        logEntry.className = 'log-entry';
        logEntry.innerHTML = `<i class="fas fa-info-circle"></i> ${message}`;
        gameLogElement.appendChild(logEntry);
        gameLogElement.scrollTop = gameLogElement.scrollHeight;
      }
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä–∏—Ü—ã
      function updateChickenPosition() {
        chickenElement.style.left = `${chickenPosition.x}%`;
        chickenElement.style.bottom = `${chickenPosition.y}%`;
      }
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫—É—Ä–∏—Ü—ã –¥–ª—è –ø–æ–±–µ–¥—ã
      function moveChickenForWin() {
        if (!gameInProgress) return;
        
        // –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥ (–≤–≤–µ—Ä—Ö) - —É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è –±–æ–ª–µ–µ —á–∞—Å—Ç–æ–≥–æ –ø–µ—Ä–µ–±–µ–≥–∞–Ω–∏—è
        chickenPosition.y -= chickenSpeed * 2.5;
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –Ω–∞ –∫–∞–∫–æ–π –¥–æ—Ä–æ–≥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫—É—Ä–∏—Ü–∞
        const roadHeights = [20, 40, 60, 80];
        const currentRoadIndex = roadHeights.findIndex(roadY => 
          Math.abs(chickenPosition.y - roadY) < 10
        );
        
        // –ï—Å–ª–∏ –∫—É—Ä–∏—Ü–∞ –Ω–∞ –¥–æ—Ä–æ–≥–µ, –ø—ã—Ç–∞–µ–º—Å—è –∏–∑–±–µ–∂–∞—Ç—å –º–∞—à–∏–Ω
        if (currentRoadIndex !== -1) {
          const road = document.querySelectorAll('.road')[currentRoadIndex];
          const cars = road.querySelectorAll('.car');
          
          let safeToMove = true;
          
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ –º–∞—à–∏–Ω –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏
          cars.forEach(car => {
            const carRect = car.getBoundingClientRect();
            const gameFieldRect = gameField.getBoundingClientRect();
            
            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä–∏—Ü—ã –≤ –ø–∏–∫—Å–µ–ª–∏
            const chickenX = (chickenPosition.x / 100) * gameFieldRect.width;
            
            // –ï—Å–ª–∏ –º–∞—à–∏–Ω–∞ –±–ª–∏–∑–∫–æ –∫ –∫—É—Ä–∏—Ü–µ, –º–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            if (Math.abs(carRect.left - chickenX) < 100) {
              safeToMove = false;
              
              // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —Å –∫–∞–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –º–∞—à–∏–Ω–∞
              if (carRect.left < chickenX) {
                chickenDirection = 1; // –î–≤–∏–≥–∞–µ–º—Å—è –≤–ø—Ä–∞–≤–æ
              } else {
                chickenDirection = -1; // –î–≤–∏–≥–∞–µ–º—Å—è –≤–ª–µ–≤–æ
              }
            }
          });
          
          // –ï—Å–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è, –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
          if (safeToMove) {
            if (Math.random() < 0.2) { // 20% chance to change direction
              chickenDirection = Math.random() < 0.5 ? -1 : 1;
            }
          }
          
          // –î–≤–∏–≥–∞–µ–º –∫—É—Ä–∏—Ü—É –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
          chickenPosition.x += chickenDirection * chickenSpeed * 3;
          
          // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –∫—É—Ä–∏—Ü—ã –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –ø–æ–ª—è
          chickenPosition.x = Math.max(10, Math.min(90, chickenPosition.x));
          
          // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä—ã–∂–∫–∞ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
          if (Math.random() < 0.5) {
            chickenElement.classList.add('jumping');
            setTimeout(() => chickenElement.classList.remove('jumping'), 500);
          }
        } else {
          // –ï—Å–ª–∏ –Ω–µ –Ω–∞ –¥–æ—Ä–æ–≥–µ, –¥–≤–∏–≥–∞–µ–º—Å—è –ø—Ä—è–º–æ –∫ —Ñ–∏–Ω–∏—à—É
          chickenDirection = 0;
        }
        
        updateChickenPosition();
      }
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫—É—Ä–∏—Ü—ã –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã—à–∞
      function moveChickenForLose() {
        if (!gameInProgress) return;
        
        // –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥ (–≤–≤–µ—Ä—Ö) - –∑–∞–º–µ–¥–ª–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã—à–∞
        chickenPosition.y -= chickenSpeed * 0.8;
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –Ω–∞ –∫–∞–∫–æ–π –¥–æ—Ä–æ–≥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫—É—Ä–∏—Ü–∞
        const roadHeights = [20, 40, 60, 80];
        const currentRoadIndex = roadHeights.findIndex(roadY => 
          Math.abs(chickenPosition.y - roadY) < 10
        );
        
        // –ï—Å–ª–∏ –∫—É—Ä–∏—Ü–∞ –Ω–∞ –¥–æ—Ä–æ–≥–µ, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –≤—Ä–µ–∑–∞–µ–º—Å—è –≤ –º–∞—à–∏–Ω—É
        if (currentRoadIndex !== -1) {
          const road = document.querySelectorAll('.road')[currentRoadIndex];
          const cars = road.querySelectorAll('.car');
          
          // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –º–∞—à–∏–Ω—É –Ω–∞ —ç—Ç–æ–π –¥–æ—Ä–æ–≥–µ
          const randomCar = cars[Math.floor(Math.random() * cars.length)];
          const carRect = randomCar.getBoundingClientRect();
          const gameFieldRect = gameField.getBoundingClientRect();
          
          // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä–∏—Ü—ã –≤ –ø–∏–∫—Å–µ–ª–∏
          const chickenX = (chickenPosition.x / 100) * gameFieldRect.width;
          
          // –î–≤–∏–≥–∞–µ–º –∫—É—Ä–∏—Ü—É –≤ —Å—Ç–æ—Ä–æ–Ω—É –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–∞—à–∏–Ω—ã
          if (carRect.left < chickenX) {
            chickenDirection = -1; // –î–≤–∏–≥–∞–µ–º—Å—è –≤–ª–µ–≤–æ –∫ –º–∞—à–∏–Ω–µ
          } else {
            chickenDirection = 1; // –î–≤–∏–≥–∞–µ–º—Å—è –≤–ø—Ä–∞–≤–æ –∫ –º–∞—à–∏–Ω–µ
          }
          
          // –î–≤–∏–≥–∞–µ–º –∫—É—Ä–∏—Ü—É –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
          chickenPosition.x += chickenDirection * chickenSpeed * 3;
          
          // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –∫—É—Ä–∏—Ü—ã –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –ø–æ–ª—è
          chickenPosition.x = Math.max(10, Math.min(90, chickenPosition.x));
          
          // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä—ã–∂–∫–∞ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
          if (Math.random() < 0.3) {
            chickenElement.classList.add('jumping');
            setTimeout(() => chickenElement.classList.remove('jumping'), 500);
          }
        } else {
          // –ï—Å–ª–∏ –Ω–µ –Ω–∞ –¥–æ—Ä–æ–≥–µ, –¥–≤–∏–≥–∞–µ–º—Å—è –ø—Ä—è–º–æ –∫ —Ñ–∏–Ω–∏—à—É
          chickenDirection = 0;
        }
        
        updateChickenPosition();
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
      function checkCollisions() {
        const chickenRect = chickenElement.getBoundingClientRect();
        const cars = document.querySelectorAll('.car');
        
        for (let car of cars) {
          const carRect = car.getBoundingClientRect();
          
          // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤
          if (
            chickenRect.left < carRect.right &&
            chickenRect.right > carRect.left &&
            chickenRect.top < carRect.bottom &&
            chickenRect.bottom > carRect.top
          ) {
            return true; // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ
          }
        }
        
        return false; // –ù–µ—Ç —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ñ–∏–Ω–∏—à–∞
      function checkFinish() {
        return chickenPosition.y <= 5; // –ö—É—Ä–∏—Ü–∞ –¥–æ—Å—Ç–∏–≥–ª–∞ –≤–µ—Ä—Ö–∞
      }
      
      // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
      function createConfetti() {
        const colors = ['#ffd700', '#ff4444', '#44ff44', '#4444ff', '#ff44ff', '#44ffff'];
        for (let i = 0; i < 150; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.width = (Math.random() * 10 + 5) + 'px';
          confetti.style.height = (Math.random() * 10 + 5) + 'px';
          confetti.style.animationDelay = Math.random() * 5 + 's';
          document.body.appendChild(confetti);
          
          // –£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
          setTimeout(() => {
            confetti.remove();
          }, 5000);
        }
      }
      
      // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
      function finishGame(success) {
        gameInProgress = false;
        clearInterval(gameInterval);
        clearInterval(gameTimer);
        clearInterval(liveBetsInterval);
        
        if (success) {
          successScore++;
          successScoreElement.textContent = successScore;
          successScoreElement.classList.add('win-animation');
          setTimeout(() => successScoreElement.classList.remove('win-animation'), 1000);
          addLogEntry(`<i class="fas fa-trophy"></i> –ö—É—Ä–∏—Ü–∞ —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–±–µ–∂–∞–ª–∞ –¥–æ—Ä–æ–≥—É!`);
          
          // –≠—Ñ—Ñ–µ–∫—Ç –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ
          createConfetti();
        } else {
          failScore++;
          failScoreElement.textContent = failScore;
          failScoreElement.classList.add('shake');
          setTimeout(() => failScoreElement.classList.remove('shake'), 500);
          addLogEntry(`<i class="fas fa-car-crash"></i> –ö—É—Ä–∏—Ü–∞ –ø–æ–ø–∞–ª–∞ –ø–æ–¥ –º–∞—à–∏–Ω—É!`);
          
          // –ê–Ω–∏–º–∞—Ü–∏—è –∞–≤–∞—Ä–∏–∏ –¥–ª—è –∫—É—Ä–∏—Ü—ã
          chickenElement.classList.add('crash');
          
          // –≠—Ñ—Ñ–µ–∫—Ç —Ç—Ä—è—Å–∫–∏ –ø—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–µ
          gameField.classList.add('shake');
          setTimeout(() => gameField.classList.remove('shake'), 500);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if (currentBet) {
          if ((currentBet.on === 'success' && success) || (currentBet.on === 'fail' && !success)) {
            // –û–ë–ê –í–ò–î–ê –°–¢–ê–í–û–ö –ò–ú–ï–Æ–¢ –ú–ù–û–ñ–ò–¢–ï–õ–¨ 2
            let winAmount = currentBet.amount * 2;
            
            balance += winAmount;
            updateUserBalance(balance);
            addLogEntry(`<i class="fas fa-coins"></i> –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${winAmount} ‚ÇΩ`);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ
            const userRow = betsTableBody.querySelector('tr:last-child');
            userRow.cells[3].className = 'win';
            userRow.cells[3].innerHTML = '<i class="fas fa-trophy"></i> –í—ã–∏–≥—Ä—ã—à';
          } else {
            addLogEntry('<i class="fas fa-sad-tear"></i> –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ —Å–≤–æ—é —Å—Ç–∞–≤–∫—É.');
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ
            const userRow = betsTableBody.querySelector('tr:last-child');
            userRow.cells[3].className = 'loss';
            userRow.cells[3].innerHTML = '<i class="fas fa-times"></i> –ü—Ä–æ–∏–≥—Ä—ã—à';
          }
          
          // –°–±—Ä–æ—Å —Ç–µ–∫—É—â–µ–π —Å—Ç–∞–≤–∫–∏ –ø–æ—Å–ª–µ –∏–≥—Ä—ã
          currentBet = null;
        }
        
        // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç–∞–≤–æ–∫ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
        setBettingControlsDisabled(false);
        
        startGameButton.disabled = false;
        startGameButton.textContent = '–ù–û–í–ê–Ø –ò–ì–†–ê';
        startGameButton.innerHTML = '<i class="fas fa-play"></i> –ù–û–í–ê–Ø –ò–ì–†–ê';
      }
      
      // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
      function startGame() {
        if (gameInProgress) return;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å—Ç–∞–≤–∫–∏
        if (!currentBet) {
          alert("–°–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É!");
          return;
        }
        
        // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        chickenPosition = { x: 50, y: 90 };
        chickenDirection = 0;
        chickenElement.classList.remove('crash');
        updateChickenPosition();
        gameLogElement.innerHTML = '<div class="log-entry"><i class="fas fa-info-circle"></i> –ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è!</div>';
        
        // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
        startGameButton.disabled = true;
        
        // –£–í–ï–õ–ò–ß–ò–í–ê–ï–ú –í–ï–†–û–Ø–¢–ù–û–°–¢–¨ –í–´–ò–ì–†–´–®–ê –î–û 80% (–≤–º–µ—Å—Ç–æ 70%)
        predeterminedOutcome = Math.random() < 0.8 ? 'win' : 'lose';
        addLogEntry(`<i class="fas fa-dice"></i> –ò—Å—Ö–æ–¥ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω: ${predeterminedOutcome === 'win' ? '–ü–û–ë–ï–î–ê' : '–ü–†–û–ò–ì–†–´–®'}`);
        
        gameInProgress = true;
        startGameButton.textContent = '–ò–ì–†–ê –ò–î–ï–¢...';
        startGameButton.innerHTML = '<i class="fas fa-running"></i> –ò–ì–†–ê –ò–î–ï–¢...';
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –∏–≥—Ä—ã
        let timeLeft = gameTime;
        gameTimerElement.textContent = `–ò–≥—Ä–∞ –Ω–∞—á–Ω–µ—Ç—Å—è —á–µ—Ä–µ–∑: ${timeLeft} —Å–µ–∫`;
        
        gameTimer = setInterval(() => {
          timeLeft--;
          gameTimerElement.textContent = `–ò–≥—Ä–∞ –Ω–∞—á–Ω–µ—Ç—Å—è —á–µ—Ä–µ–∑: ${timeLeft} —Å–µ–∫`;
          
          if (timeLeft <= 0) {
            clearInterval(gameTimer);
            gameTimerElement.textContent = '–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!';
            // –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∏—Å—Ö–æ–¥–æ–º
            finishGame(predeterminedOutcome === 'win');
          }
        }, 1000);
        
        // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –∫—É—Ä–∏—Ü—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
        gameInterval = setInterval(() => {
          if (!gameInProgress) return;
          
          // –î–≤–∏–≥–∞–µ–º –∫—É—Ä–∏—Ü—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∏—Å—Ö–æ–¥–∞
          if (predeterminedOutcome === 'win') {
            moveChickenForWin();
          } else {
            moveChickenForLose();
          }
          
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
          if (checkCollisions()) {
            finishGame(false);
            return;
          }
          
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ñ–∏–Ω–∏—à–∞
          if (checkFinish()) {
            finishGame(true);
            return;
          }
        }, 50); // –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 20 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
        
        // –ó–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∂–∏–≤—ã—Ö —Å—Ç–∞–≤–æ–∫
        startLiveBets();
      }
      
      // –ó–∞–ø—É—Å–∫ –∂–∏–≤—ã—Ö —Å—Ç–∞–≤–æ–∫
      function startLiveBets() {
        liveBetsInterval = setInterval(() => {
          if (!gameInProgress) return;
          
          const newBet = generateRandomBet();
          addBetToTable(newBet, true);
        }, 3000); // –ù–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
      }
      
      // –°–±—Ä–æ—Å –∏–≥—Ä—ã
      function resetGame() {
        gameInProgress = false;
        clearInterval(gameInterval);
        clearInterval(gameTimer);
        clearInterval(liveBetsInterval);
        
        chickenPosition = { x: 50, y: 90 };
        chickenDirection = 0;
        chickenElement.classList.remove('crash');
        updateChickenPosition();
        gameLogElement.innerHTML = '<div class="log-entry"><i class="fas fa-info-circle"></i> –ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞.</div>';
        
        // –í–æ–∑–≤—Ä–∞—Ç —Å—Ç–∞–≤–∫–∏ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ –¥–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
        if (currentBet && !gameInProgress) {
          balance += currentBet.amount;
          updateUserBalance(balance);
          currentBet = null;
          addLogEntry('<i class="fas fa-undo"></i> –°—Ç–∞–≤–∫–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ.');
          
          // –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
          const userRow = betsTableBody.querySelector('tr:last-child');
          if (userRow && userRow.cells[0].textContent === "–í—ã") {
            userRow.remove();
          }
        }
        
        // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç–∞–≤–æ–∫ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ
        setBettingControlsDisabled(false);
        
        startGameButton.disabled = true;
        startGameButton.textContent = '–°–î–ï–õ–ê–ô–¢–ï –°–¢–ê–í–ö–£ –î–õ–Ø –ù–ê–ß–ê–õ–ê';
        startGameButton.innerHTML = '<i class="fas fa-play"></i> –°–î–ï–õ–ê–ô–¢–ï –°–¢–ê–í–ö–£ –î–õ–Ø –ù–ê–ß–ê–õ–ê';
        gameTimerElement.textContent = '–ò–≥—Ä–∞ –Ω–∞—á–Ω–µ—Ç—Å—è —á–µ—Ä–µ–∑: 5 —Å–µ–∫';
        
        // –°–±—Ä–æ—Å —Å—Ç–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        currentBet = null;
        
        // –°–±—Ä–æ—Å —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∞–≤–æ–∫
        initializeBetsTable();
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞
        resetGameButton.classList.add('pulse');
        setTimeout(() => resetGameButton.classList.remove('pulse'), 500);
      }
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      function updateUserBalance(newBalance) {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser) {
          currentUser.balance = newBalance;
          localStorage.setItem('currentUser', JSON.stringify(currentUser));
          
          // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –≤ –º–∞—Å—Å–∏–≤–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
          const users = JSON.parse(localStorage.getItem('users') || '[]');
          const userIndex = users.findIndex(u => u.username === currentUser.username);
          if (userIndex !== -1) {
            users[userIndex].balance = newBalance;
            localStorage.setItem('users', JSON.stringify(users));
          }
          
          // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
          document.getElementById('balance-amount').textContent = newBalance;
          balanceElement.textContent = `${newBalance} ‚ÇΩ`;
          balance = newBalance;
        }
      }
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
      betSuccessButton.addEventListener('click', () => placeBet('success'));
      betFailButton.addEventListener('click', () => placeBet('fail'));
      startGameButton.addEventListener('click', startGame);
      resetGameButton.addEventListener('click', resetGame);
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      initializeBetsTable();
      updateBalance();
      updateChickenPosition();
    });
  </script>
</body>
</html>